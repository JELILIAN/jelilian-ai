<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JELILIAN AI - å·¥ä½œç‰ˆæœ¬</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        .container { text-align: center; }
        .input-box { width: 100%; padding: 15px; margin: 20px 0; border: 2px solid #007bff; border-radius: 8px; font-size: 16px; }
        .send-btn { padding: 15px 30px; background: #007bff; color: white; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; }
        .send-btn:hover { background: #0056b3; }
        .result { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f8f9fa; text-align: left; }
        .tabs { margin: 20px 0; }
        .tab { display: inline-block; padding: 10px 20px; margin: 5px; background: #f8f9fa; border: 1px solid #ddd; border-radius: 20px; cursor: pointer; }
        .tab:hover { background: #007bff; color: white; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤– JELILIAN AI åŠ©æ‰‹</h1>
        <p>æˆ‘èƒ½ä¸ºä½ åšä»€ä¹ˆï¼Ÿ</p>
        
        <div class="tabs">
            <div class="tab" onclick="setPrompt('å¸®æˆ‘åˆ›å»ºä¸€ä¸ªç°ä»£åŒ–çš„ä¼ä¸šå®˜ç½‘')">ğŸŒ åˆ›å»ºç½‘ç«™</div>
            <div class="tab" onclick="setPrompt('å¸®æˆ‘å†™ä¸€ä»½ä¸“ä¸šçš„å•†ä¸šè®¡åˆ’ä¹¦')">âœï¸ å†…å®¹å†™ä½œ</div>
            <div class="tab" onclick="setPrompt('ä¸ºæˆ‘çš„å…¬å¸è®¾è®¡ä¸€ä¸ªç°ä»£ç®€æ´çš„Logo')">ğŸ¨ è®¾è®¡</div>
            <div class="tab" onclick="setPrompt('å¸®æˆ‘åˆ†ææ•°æ®å¹¶ç”ŸæˆæŠ¥å‘Š')">ğŸ“Š æ•°æ®åˆ†æ</div>
        </div>
        
        <textarea id="messageInput" class="input-box" placeholder="è¾“å…¥ä½ çš„é—®é¢˜æˆ–éœ€æ±‚..."></textarea>
        <br>
        <button class="send-btn" onclick="sendMessage()">å‘é€æ¶ˆæ¯ â†—</button>
        
        <div id="result" class="result" style="display: none;"></div>
    </div>

    <script>
        function setPrompt(text) {
            document.getElementById('messageInput').value = text;
        }
        
        async function sendMessage() {
            const input = document.getElementById('messageInput');
            const resultDiv = document.getElementById('result');
            const message = input.value.trim();
            
            if (!message) {
                alert('è¯·è¾“å…¥æ‚¨çš„éœ€æ±‚');
                return;
            }
            
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<p>ğŸ”„ AIæ­£åœ¨å¤„ç†æ‚¨çš„è¯·æ±‚ï¼Œè¯·ç¨å€™...</p>';
            
            try {
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        message: message,
                        provider: 'qwen',
                        options: { maxTokens: 1000 }
                    })
                });
                
                const data = await response.json();
                
                if (response.ok && data.success) {
                    resultDiv.innerHTML = `
                        <h3>âœ… AIå›å¤ï¼š</h3>
                        <div style="background: white; padding: 15px; border-radius: 4px; margin: 10px 0;">
                            ${data.text.replace(/\n/g, '<br>')}
                        </div>
                        <p><small>å“åº”æ—¶é—´: ${data.responseTime}ms | å‰©ä½™ä½¿ç”¨æ¬¡æ•°: ${data.usage ? data.usage.remaining : 'æœªçŸ¥'}</small></p>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <h3>âŒ å¤„ç†å¤±è´¥ï¼š</h3>
                        <p>${data.error || 'æœªçŸ¥é”™è¯¯'}</p>
                        <p>çŠ¶æ€ç : ${response.status}</p>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <h3>âŒ è¯·æ±‚å¤±è´¥ï¼š</h3>
                    <p>${error.message}</p>
                    <p>è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åé‡è¯•</p>
                `;
            }
        }
        
        // æ”¯æŒå›è½¦é”®å‘é€
        document.getElementById('messageInput').addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && (e.ctrlKey || e.metaKey)) {
                e.preventDefault();
                sendMessage();
            }
        });
        
        // é¡µé¢åŠ è½½å®Œæˆæç¤º
        window.onload = function() {
            console.log('âœ… JELILIAN AI å·²åŠ è½½å®Œæˆ');
        };
    </script>
</body>
</html>
