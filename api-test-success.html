<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âœ… APIé…ç½®æˆåŠŸ</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; padding: 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; margin: 0; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 40px; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        .success-header { text-align: center; margin-bottom: 40px; }
        .success-icon { font-size: 80px; margin-bottom: 20px; }
        .success-title { color: #28a745; font-size: 2.5rem; margin-bottom: 10px; }
        .success-subtitle { color: #6c757d; font-size: 1.2rem; }
        .status-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0; }
        .status-card { background: #f8f9fa; padding: 20px; border-radius: 12px; border-left: 4px solid #28a745; }
        .status-card h3 { color: #333; margin: 0 0 10px 0; }
        .status-card p { color: #666; margin: 0; }
        .test-section { background: #e9ecef; padding: 30px; border-radius: 12px; margin: 30px 0; }
        .test-button { background: #007bff; color: white; border: none; padding: 15px 30px; border-radius: 8px; cursor: pointer; font-size: 16px; margin: 10px; transition: all 0.3s; }
        .test-button:hover { background: #0056b3; transform: translateY(-2px); }
        .test-result { background: white; padding: 20px; border-radius: 8px; margin: 20px 0; border: 1px solid #dee2e6; }
        .ai-response { background: #f8f9fa; padding: 15px; border-radius: 6px; margin: 10px 0; border-left: 4px solid #007bff; }
        .next-steps { background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 30px; border-radius: 12px; margin: 30px 0; }
        .next-steps h3 { margin: 0 0 20px 0; }
        .next-steps ul { margin: 0; padding-left: 20px; }
        .next-steps li { margin: 10px 0; }
        .loading { color: #ffc107; }
        .success { color: #28a745; }
        .error { color: #dc3545; }
    </style>
</head>
<body>
    <div class="container">
        <div class="success-header">
            <div class="success-icon">ğŸ‰</div>
            <h1 class="success-title">APIé…ç½®æˆåŠŸï¼</h1>
            <p class="success-subtitle">é˜¿é‡Œåƒé—®APIå¯†é’¥å·²æˆåŠŸé…ç½®ï¼Œç”¨æˆ·ç°åœ¨å¯ä»¥ç›´æ¥ä½¿ç”¨AIåŠŸèƒ½</p>
        </div>

        <div class="status-grid">
            <div class="status-card">
                <h3>âœ… APIå¯†é’¥çŠ¶æ€</h3>
                <p>å·²é…ç½®é˜¿é‡Œåƒé—®APIå¯†é’¥</p>
            </div>
            <div class="status-card">
                <h3>âœ… ç”¨æˆ·ä½“éªŒ</h3>
                <p>ç”¨æˆ·æ— éœ€è¾“å…¥APIå¯†é’¥</p>
            </div>
            <div class="status-card">
                <h3>âœ… æœåŠ¡å™¨çŠ¶æ€</h3>
                <p>è¿è¡Œåœ¨ localhost:3000</p>
            </div>
            <div class="status-card">
                <h3>âœ… AIæœåŠ¡å•†</h3>
                <p>é˜¿é‡Œåƒé—® (DashScope)</p>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ§ª æµ‹è¯•AIåŠŸèƒ½</h3>
            <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æµ‹è¯•ä¸åŒçš„AIåŠŸèƒ½ï¼š</p>
            
            <button class="test-button" onclick="testChat('ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹JELILIAN AIåŠ©æ‰‹çš„åŠŸèƒ½', 'åŠŸèƒ½ä»‹ç»')">æµ‹è¯•åŠŸèƒ½ä»‹ç»</button>
            <button class="test-button" onclick="testChat('å¸®æˆ‘åˆ›å»ºä¸€ä¸ªç®€å•çš„HTMLç½‘é¡µä»£ç ', 'ç½‘é¡µåˆ›å»º')">æµ‹è¯•ç½‘é¡µåˆ›å»º</button>
            <button class="test-button" onclick="testChat('å†™ä¸€ä»½å…³äºäººå·¥æ™ºèƒ½çš„ç®€çŸ­æ–‡ç« ', 'å†…å®¹åˆ›ä½œ')">æµ‹è¯•å†…å®¹åˆ›ä½œ</button>
            <button class="test-button" onclick="testChat('å¸®æˆ‘è®¾è®¡ä¸€ä¸ªLogoçš„åˆ›æ„æƒ³æ³•', 'è®¾è®¡å»ºè®®')">æµ‹è¯•è®¾è®¡å»ºè®®</button>

            <div id="testResults"></div>
        </div>

        <div class="next-steps">
            <h3>ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ</h3>
            <ul>
                <li><strong>æœ¬åœ°ä½¿ç”¨</strong>: è®¿é—® <a href="http://localhost:3000" style="color: #fff; text-decoration: underline;">http://localhost:3000</a> å¼€å§‹ä½¿ç”¨</li>
                <li><strong>å…¨çƒéƒ¨ç½²</strong>: æ¨é€åˆ°Vercelè®©å…¨ä¸–ç•Œç”¨æˆ·è®¿é—®</li>
                <li><strong>ç›‘æ§ä½¿ç”¨</strong>: å®šæœŸæ£€æŸ¥APIä½¿ç”¨é‡å’Œè´¹ç”¨</li>
                <li><strong>åŠŸèƒ½æ‰©å±•</strong>: æ·»åŠ æ›´å¤šAIåŠŸèƒ½å’Œå·¥å…·</li>
            </ul>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:3000/api';
        
        async function testChat(message, testName) {
            const resultsEl = document.getElementById('testResults');
            
            // åˆ›å»ºæµ‹è¯•ç»“æœå®¹å™¨
            const testDiv = document.createElement('div');
            testDiv.className = 'test-result';
            testDiv.innerHTML = `
                <h4>${testName}</h4>
                <p><strong>æµ‹è¯•æ¶ˆæ¯:</strong> ${message}</p>
                <div class="loading">â³ æ­£åœ¨æµ‹è¯•...</div>
            `;
            resultsEl.appendChild(testDiv);
            
            const startTime = Date.now();
            
            try {
                const response = await fetch(API_BASE + '/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        message: message,
                        options: { maxTokens: 800 }
                    })
                });
                
                const data = await response.json();
                const responseTime = Date.now() - startTime;
                
                if (data.success) {
                    testDiv.innerHTML = `
                        <h4>${testName}</h4>
                        <p><strong>æµ‹è¯•æ¶ˆæ¯:</strong> ${message}</p>
                        <div class="success">âœ… æµ‹è¯•æˆåŠŸï¼å“åº”æ—¶é—´: ${responseTime}ms</div>
                        <div class="ai-response">
                            <strong>AIå›å¤:</strong><br>
                            ${data.text.replace(/\n/g, '<br>')}
                        </div>
                        <small style="color: #6c757d;">
                            æœåŠ¡å•†: ${data.provider} | APIå“åº”æ—¶é—´: ${data.responseTime}ms | 
                            æ¶ˆè€—tokens: ${data.tokens || 'N/A'}
                        </small>
                    `;
                } else {
                    testDiv.innerHTML = `
                        <h4>${testName}</h4>
                        <p><strong>æµ‹è¯•æ¶ˆæ¯:</strong> ${message}</p>
                        <div class="error">âŒ æµ‹è¯•å¤±è´¥: ${data.error}</div>
                    `;
                }
            } catch (error) {
                testDiv.innerHTML = `
                    <h4>${testName}</h4>
                    <p><strong>æµ‹è¯•æ¶ˆæ¯:</strong> ${message}</p>
                    <div class="error">âŒ è¯·æ±‚å¤±è´¥: ${error.message}</div>
                `;
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
        window.onload = function() {
            console.log('ğŸ‰ JELILIAN AI APIé…ç½®æˆåŠŸï¼');
            console.log('ğŸ“ æœ¬åœ°è®¿é—®: http://localhost:3000');
            console.log('ğŸ”‘ APIå¯†é’¥: å·²é…ç½® (sk-bddda4e9e2ef4aa5acdb773207ac4036)');
            console.log('ğŸ‘¤ ç”¨æˆ·ä½“éªŒ: æ— éœ€è¾“å…¥APIå¯†é’¥');
        };
    </script>
</body>
</html>